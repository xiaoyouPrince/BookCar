---
description: 根据用户身份取用，展示，归纳查询用户身份逻辑
---

# 用户身份查询逻辑

用到用户身份页面主要为

1. 约车主页，进入主页请求用户身份，并基于此方可请求后续一些接口
2. 菜单页面，基于用户身份信息，展示图片、昵称等基本信息
3. 个人信息页面，展示个人信息（包括不同用户身份）

基于用户身份信息的通用性和对于性能考虑，尽量复用身份信息。只有当用户显示切换了用户身份类型，才重新请求最新用户信息。

{% hint style="info" %}
**核心思路**

XYBookCarVC 只要 viewDidLoad 即请求 userInfo

用户切换用户身份，请求userInfo

订单完成后，请求userInfo，刷新用户当前余额

请求一次用户身份，在菜单栏和个人信息页面通用【不进行多次请求】，通用方法为：约车主页请求到 userInfo，赋值给 menuVC，menuVC 内部不进行自己的再次请求。
{% endhint %}

### 落地方案

1. 只要退出约车主页，从上级页面进入约车页面  ---- &gt;  加载用户数据
2. 只要状态到了支付状态，重新加载用户数据，刷新余额
3. 每次加载到userInfo，即时赋值给 self.menuVC 同步

