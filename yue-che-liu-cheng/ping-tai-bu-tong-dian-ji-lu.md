---
description: 记录首汽和红旗约车平台后台不同点。基于首汽，不同点为红旗不同之处
---

# 平台不同点记录

### title 不同

{% hint style="info" %}
#### 首汽平台

title 为**首汽约车**  ----  只有订单确认页面为 **确认订单**
{% endhint %}

{% hint style="info" %}
#### 红旗平台

title 为**红旗专车**  ----  只有订单确认页面为 **确认订单**
{% endhint %}

### 服务城市列表数据结构不同

服务城市列表已经由后台修改到同首汽结构一致

### 请求上车点周围车辆逻辑不同

红旗平台没有周围附近车辆接口，无法展示 **x分钟在此上车**

{% hint style="info" %}
#### 首汽平台

1. 定位用户当前位置坐标点
2. 请求周围附近车辆列表\(App端目前优化，展示最多十个车，防止车辆过多\)
3. 计算得到最近车辆距离和预估时间
4. 上车定位点大头站展示 -- **x分钟在此上车**
{% endhint %}

{% hint style="info" %}
#### 红旗平台

1. 定位用户当前位置坐标点
2. 上车定位点大头站展示 -- **在此上车**
{% endhint %}

### 取消订单逻辑不同

红旗平台没有查询取消订单违约金接口，表现为直接取消

{% hint style="info" %}
**首汽平台**

1. **查询取消订单违约金，alert提示需付xx违约金**
2. **用户确认取消 -&gt; 调用取消订单接口，取消订单**
3. **跳转到内部提交原因页面**
{% endhint %}

{% hint style="info" %}
**红旗平台**

1. **调用取消订单接口，取消订单**
2. **跳转到内部提交原因页面**
{% endhint %}

### 用车过程中底部提示不同

由于平台不同，展示的页面 tips 相应不同

### 行程结束，结算页面接口数据结构不同

{% hint style="danger" %}
忘记具体差异了，记得是有个dto什么之类的，后续测试再完善
{% endhint %}

### 行程中，大头针展示时间和距离

两个平台由于接口不同，所展示的逻辑也不同，最初相关接口仅为首汽设计，因为**首汽有请求接单司机距离乘客时间和距离的接口**。并且title文字岁参数固定。

后加入红旗之后，需要扩展原来接口。遂接口添加一个参数。参数主要用来区分各自平台和对应状态，方便日后修改提示语。接口如下

{% code title="XYCustomCalloutView.h" %}
```objectivec
/**
 发送时间和距离，让司机大头针展示当前的时间和距离

 @param distance 距离字符串 单位米
 @param duration 时间字符串 单位秒  传 nil 不展示时间
 @param platAndStatus 用车平台和状态  1是司机接乘客 2是送乘客去目的地
 */
+ (void)postNotyfationWithDistance:(NSString *)distance duration:(nullable NSString *)duration platAndStatus:(NSString *)platAndStatus;

```
{% endcode %}

{% hint style="info" %}
**首汽约车【轮询司机位置可拿到司机距离和预估时间】**

1. **上车前**
   1. **路径规划：司机到乘客（10s重绘）**
   2. **提示语：司机距您x公里，预计用时x分钟**
2. **上车后**
   1. **路径规划：司机到目的地（10s重绘）**
   2. **提示语：距离终点x公里\(手动计算\)**
{% endhint %}

{% hint style="info" %}
**红旗智行【无法拿到司机距离和预估时间】**

1. **上车前**
   1. **路径规划：司机到乘客（10s重绘）**
   2. **提示语：司机距您x公里（手动计算）**
2. **上车后**
   1. **路径规划：司机到目的地（10s重绘）**
   2. **提示语：距离终点x公里（手动计算）**
{% endhint %}

### 分享提示信息不同

分享页面最下面一句话提示信息目前为图片，指定为首汽平台。现在增加了新平台，需要根据平台做不同展示【**目前为同步安卓，整体展示为无平台信息**】

{% hint style="info" %}
**首汽约车**

HELO 员工自助服务平台 x 首汽约车
{% endhint %}

{% hint style="info" %}
**红旗智行**

HELO 员工自助服务平台 x 红旗智行
{% endhint %}

